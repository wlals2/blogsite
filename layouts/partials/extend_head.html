{{- /* Mermaid Diagram Support */ -}}
<script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
<script>
  // 즉시 초기화 (모듈 방식 대신 일반 스크립트)
  document.addEventListener('DOMContentLoaded', function() {
    // 테마 감지
    const isDark = document.documentElement.dataset.theme === 'dark' ||
                   window.matchMedia('(prefers-color-scheme: dark)').matches;

    // Mermaid 초기화
    mermaid.initialize({
      startOnLoad: false,
      theme: isDark ? 'dark' : 'default',
      securityLevel: 'loose',
      fontFamily: 'inherit'
    });

    // 모든 .mermaid 요소 렌더링
    document.querySelectorAll('.mermaid').forEach((element, index) => {
      const id = 'mermaid-' + index;
      element.id = id;
      mermaid.run({ nodes: [element] });
    });
  });
</script>

{{- /* Custom CSS */ -}}
<link rel="stylesheet" href="{{ "css/custom.css" | absURL }}" />
