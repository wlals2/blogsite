{{- define "main" }}

<style>
/* â”€â”€ News Page Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-hero {
  text-align: center;
  padding: 2.5rem 0 2rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 2rem;
}
.news-hero h1 {
  font-size: 2rem;
  font-weight: 700;
  letter-spacing: -0.5px;
  margin: 0 0 0.5rem;
}
.news-hero p {
  color: var(--secondary);
  font-size: 0.95rem;
  margin: 0 0 1.25rem;
}
.news-live-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 4px 12px;
  font-size: 0.75rem;
  color: var(--secondary);
}
.news-live-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #2ecc71;
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

/* â”€â”€ Filter Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-filters {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.75rem;
  flex-wrap: wrap;
}
.news-filter-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 16px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--secondary);
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}
.news-filter-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}
.news-filter-btn.active {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--theme);
  font-weight: 600;
}
.news-filter-count {
  background: rgba(128,128,128,0.2);
  border-radius: 10px;
  padding: 1px 7px;
  font-size: 0.75rem;
}
.news-filter-btn.active .news-filter-count {
  background: rgba(0,0,0,0.2);
}

/* â”€â”€ Stats Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-stats-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
  font-size: 0.8rem;
  color: var(--secondary);
}
.news-stats-left {
  display: flex;
  align-items: center;
  gap: 1rem;
}
.news-stat-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* â”€â”€ Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1rem;
}

/* â”€â”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-card {
  display: flex;
  flex-direction: column;
  background: var(--entry);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 1.1rem 1.25rem 1rem;
  text-decoration: none;
  color: inherit;
  transition: transform 0.18s, box-shadow 0.18s, border-color 0.18s;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}
.news-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  opacity: 0;
  transition: opacity 0.2s;
}
.news-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
  border-color: var(--primary);
  text-decoration: none;
}
.news-card:hover::before {
  opacity: 1;
}

/* top accent line per source */
.news-card[data-source="The Hacker News"]::before  { background: #2ecc71; }
.news-card[data-source="BleepingComputer"]::before  { background: #3498db; }
.news-card[data-source="Krebs on Security"]::before { background: #e74c3c; }
.news-card[data-source="The Verge AI"]::before      { background: #9b59b6; }
.news-card[data-source="MIT Technology Review"]::before { background: #e67e22; }

/* â”€â”€ Card Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.75rem;
}
.news-card-badges {
  display: flex;
  align-items: center;
  gap: 6px;
}
.news-source-badge {
  display: inline-block;
  padding: 2px 9px;
  border-radius: 4px;
  font-size: 0.68rem;
  font-weight: 700;
  color: #fff;
  letter-spacing: 0.3px;
  flex-shrink: 0;
}
.badge-thn    { background: #2ecc71; }
.badge-bc     { background: #3498db; }
.badge-krebs  { background: #e74c3c; }
.badge-verge  { background: #9b59b6; }
.badge-mit    { background: #e67e22; }
.badge-other  { background: #7f8c8d; }

.news-category-tag {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.68rem;
  font-weight: 500;
  background: var(--code-bg);
  color: var(--secondary);
}
.news-external-icon {
  color: var(--secondary);
  opacity: 0.5;
  font-size: 0.75rem;
  flex-shrink: 0;
}
.news-card:hover .news-external-icon {
  opacity: 1;
  color: var(--primary);
}

/* â”€â”€ Card Title â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-card-title {
  font-size: 0.95rem;
  font-weight: 600;
  line-height: 1.45;
  color: var(--primary);
  margin-bottom: 0.6rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  flex-grow: 1;
}

/* â”€â”€ Card Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-card-summary {
  font-size: 0.82rem;
  color: var(--secondary);
  line-height: 1.55;
  margin-bottom: 0.9rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  flex-grow: 1;
}
.news-ai-badge {
  display: inline-block;
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 0.62rem;
  font-weight: 700;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: #fff;
  margin-right: 4px;
  vertical-align: middle;
  letter-spacing: 0.3px;
}

/* â”€â”€ Card Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 0.75rem;
  border-top: 1px solid var(--border);
  font-size: 0.75rem;
  color: var(--secondary);
  margin-top: auto;
}
.news-card-meta {
  display: flex;
  align-items: center;
  gap: 6px;
}
.news-dot-sep {
  opacity: 0.4;
}

/* â”€â”€ Loading / Error / Empty â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: 3rem 1rem;
  color: var(--secondary);
}
.news-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--border);
  border-top-color: var(--primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: 0 auto 1rem;
}
@keyframes spin { to { transform: rotate(360deg); } }
.news-error-icon {
  font-size: 2rem;
  margin-bottom: 0.75rem;
}
.news-retry-btn {
  margin-top: 1rem;
  padding: 6px 18px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: transparent;
  color: var(--primary);
  font-size: 0.85rem;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.2s;
}
.news-retry-btn:hover {
  background: var(--primary);
  color: var(--theme);
  border-color: var(--primary);
}

/* â”€â”€ Load More â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-load-more-wrap {
  text-align: center;
  margin-top: 2rem;
}
.news-load-more-btn {
  padding: 10px 32px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: transparent;
  color: var(--primary);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.news-load-more-btn:hover {
  background: var(--entry);
  border-color: var(--primary);
}
.news-load-more-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* â”€â”€ Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.news-section-label {
  grid-column: 1 / -1;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: var(--secondary);
  padding: 0.25rem 0;
  border-bottom: 1px solid var(--border);
  margin: 0.5rem 0 0.25rem;
}

@media (max-width: 640px) {
  .news-grid {
    grid-template-columns: 1fr;
  }
  .news-hero h1 {
    font-size: 1.5rem;
  }
  .news-stats-bar {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
}
</style>

<!-- Hero -->
<div class="news-hero">
  <h1>Security &amp; AI News</h1>
  <p>ë³´ì•ˆê³¼ AI ë¶„ì•¼ì˜ ìµœì‹  ë‰´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤</p>
  <span class="news-live-badge">
    <span class="news-live-dot"></span>
    ë§¤ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸
  </span>
</div>

<!-- Filter Tabs -->
<div class="news-filters">
  <button class="news-filter-btn active" data-cat="all">
    ì „ì²´ <span class="news-filter-count" id="count-all">â€“</span>
  </button>
  <button class="news-filter-btn" data-cat="security">
    ğŸ”’ Security <span class="news-filter-count" id="count-security">â€“</span>
  </button>
  <button class="news-filter-btn" data-cat="ai">
    ğŸ¤– AI <span class="news-filter-count" id="count-ai">â€“</span>
  </button>
</div>

<!-- Stats Bar -->
<div class="news-stats-bar">
  <div class="news-stats-left">
    <span class="news-stat-item" id="stats-total">
      <span>ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
    </span>
  </div>
  <span id="stats-updated"></span>
</div>

<!-- Grid -->
<div class="news-grid" id="news-grid">
  <div class="news-state">
    <div class="news-spinner"></div>
    <p>ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤</p>
  </div>
</div>

<!-- Load More -->
<div class="news-load-more-wrap" id="load-more-wrap" style="display:none">
  <button class="news-load-more-btn" id="load-more-btn">
    ë” ë³´ê¸° <span id="load-more-remaining"></span>
  </button>
</div>

<script>
(function () {
  const SOURCE_CONFIG = {
    'The Hacker News':      { abbr: 'THN',   cls: 'badge-thn'   },
    'BleepingComputer':     { abbr: 'BC',    cls: 'badge-bc'    },
    'Krebs on Security':    { abbr: 'Krebs', cls: 'badge-krebs' },
    'The Verge AI':         { abbr: 'Verge', cls: 'badge-verge' },
    'MIT Technology Review':{ abbr: 'MIT',   cls: 'badge-mit'   },
  };

  const PAGE_SIZE = 20;
  let currentCat = 'all';
  let currentPage = 0;
  let totalElements = 0;
  let totalPages = 0;
  let isLoading = false;
  let counts = { all: 0, security: 0, ai: 0 };

  // â”€â”€ Date formatter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function formatDate(iso) {
    if (!iso) return '';
    const d = new Date(iso);
    const now = new Date();
    const diffMs = now - d;
    const diffMin = Math.floor(diffMs / 60000);
    const diffHr  = Math.floor(diffMs / 3600000);
    const diffDay = Math.floor(diffMs / 86400000);
    if (diffMin < 60)  return diffMin <= 1 ? 'ë°©ê¸ˆ ì „' : `${diffMin}ë¶„ ì „`;
    if (diffHr  < 24)  return `${diffHr}ì‹œê°„ ì „`;
    if (diffDay < 7)   return `${diffDay}ì¼ ì „`;
    return d.toLocaleDateString('ko-KR', { year:'numeric', month:'2-digit', day:'2-digit' });
  }

  // â”€â”€ Source badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function sourceBadge(name) {
    const cfg = SOURCE_CONFIG[name] || { abbr: name.slice(0,4), cls: 'badge-other' };
    return `<span class="news-source-badge ${cfg.cls}">${cfg.abbr}</span>`;
  }

  // â”€â”€ Category tag â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function categoryTag(cat) {
    const label = cat === 'security' ? 'ğŸ”’ Security' : 'ğŸ¤– AI';
    return `<span class="news-category-tag">${label}</span>`;
  }

  // â”€â”€ Build a single card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function buildCard(article) {
    const summary = article.aiSummary || article.description || '';
    const aiBadge = article.aiSummary ? '<span class="news-ai-badge">AI</span>' : '';
    const date    = formatDate(article.publishedAt);
    const src     = article.sourceName || '';

    return `
      <a class="news-card"
         href="${escHtml(article.link)}"
         target="_blank"
         rel="noopener noreferrer"
         data-source="${escHtml(src)}">
        <div class="news-card-header">
          <div class="news-card-badges">
            ${sourceBadge(src)}
            ${categoryTag(article.sourceCategory)}
          </div>
          <span class="news-external-icon">â†—</span>
        </div>
        <div class="news-card-title">${escHtml(article.title)}</div>
        <div class="news-card-summary">${aiBadge}${escHtml(summary)}</div>
        <div class="news-card-footer">
          <div class="news-card-meta">
            <span>${date}</span>
            <span class="news-dot-sep">Â·</span>
            <span>${escHtml(src)}</span>
          </div>
        </div>
      </a>`;
  }

  function escHtml(str) {
    if (!str) return '';
    return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  // â”€â”€ API fetch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function fetchNews(cat, page) {
    const base = cat === 'all'
      ? `/api/news?page=${page}&size=${PAGE_SIZE}`
      : `/api/news/category/${cat}?page=${page}&size=${PAGE_SIZE}`;
    const resp = await fetch(base);
    if (!resp.ok) throw Object.assign(new Error('fetch failed'), { status: resp.status });
    return resp.json();
  }

  // â”€â”€ Render articles into grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderArticles(articles, append) {
    const grid = document.getElementById('news-grid');
    if (!append) grid.innerHTML = '';
    if (!articles.length && !append) {
      grid.innerHTML = `<div class="news-state"><div class="news-error-icon">ğŸ“­</div><p>ì•„ì§ ìˆ˜ì§‘ëœ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤</p></div>`;
      return;
    }
    grid.insertAdjacentHTML('beforeend', articles.map(buildCard).join(''));
  }

  // â”€â”€ Show error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showError(status) {
    const grid = document.getElementById('news-grid');
    const msg  = status === 403
      ? 'ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬(192.168.1.0/24)ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤'
      : 'ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
    const retry = status !== 403
      ? `<button class="news-retry-btn" onclick="location.reload()">ë‹¤ì‹œ ì‹œë„</button>` : '';
    grid.innerHTML = `<div class="news-state"><div class="news-error-icon">âš ï¸</div><p>${msg}</p>${retry}</div>`;
  }

  // â”€â”€ Update stats bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function updateStats() {
    document.getElementById('stats-total').innerHTML =
      `<span>ì´ <strong>${totalElements}</strong>ê±´ì˜ ê¸°ì‚¬</span>`;
    document.getElementById('count-all').textContent      = counts.all      || 'â€“';
    document.getElementById('count-security').textContent = counts.security || 'â€“';
    document.getElementById('count-ai').textContent       = counts.ai       || 'â€“';
    const now = new Date();
    document.getElementById('stats-updated').textContent  =
      `ë§ˆì§€ë§‰ í™•ì¸: ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}`;
  }

  // â”€â”€ Update Load More button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function updateLoadMore() {
    const wrap = document.getElementById('load-more-wrap');
    const btn  = document.getElementById('load-more-btn');
    const rem  = document.getElementById('load-more-remaining');
    const loaded = (currentPage + 1) * PAGE_SIZE;
    const remaining = Math.max(0, totalElements - loaded);
    if (currentPage + 1 >= totalPages || totalElements === 0) {
      wrap.style.display = 'none';
    } else {
      wrap.style.display = 'block';
      rem.textContent = `(${remaining}ê±´ ë‚¨ìŒ)`;
    }
    btn.disabled = isLoading;
  }

  // â”€â”€ Load page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function load(cat, page, append) {
    if (isLoading) return;
    isLoading = true;
    const btn = document.getElementById('load-more-btn');
    if (btn) btn.textContent = 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';

    try {
      const data = await fetchNews(cat, page);
      totalElements = data.totalElements || 0;
      totalPages    = data.totalPages    || 0;
      renderArticles(data.content || [], append);
      updateStats();
      updateLoadMore();
    } catch (e) {
      if (!append) showError(e.status);
    } finally {
      isLoading = false;
      if (btn) {
        const rem = document.getElementById('load-more-remaining');
        btn.innerHTML = `ë” ë³´ê¸° <span id="load-more-remaining">${rem ? rem.textContent : ''}</span>`;
      }
    }
  }

  // â”€â”€ Fetch counts for badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function fetchCounts() {
    try {
      const [all, sec, ai] = await Promise.all([
        fetch('/api/news?page=0&size=1').then(r => r.json()),
        fetch('/api/news/category/security?page=0&size=1').then(r => r.json()),
        fetch('/api/news/category/ai?page=0&size=1').then(r => r.json()),
      ]);
      counts.all      = all.totalElements      || 0;
      counts.security = sec.totalElements      || 0;
      counts.ai       = ai.totalElements       || 0;
      updateStats();
    } catch (_) {}
  }

  // â”€â”€ Filter buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelectorAll('.news-filter-btn').forEach(btn => {
    btn.addEventListener('click', function () {
      document.querySelectorAll('.news-filter-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      currentCat  = this.dataset.cat;
      currentPage = 0;
      totalElements = 0;
      document.getElementById('news-grid').innerHTML =
        `<div class="news-state"><div class="news-spinner"></div><p>ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>`;
      document.getElementById('load-more-wrap').style.display = 'none';
      load(currentCat, currentPage, false);
    });
  });

  // â”€â”€ Load More â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('load-more-btn').addEventListener('click', function () {
    currentPage++;
    load(currentCat, currentPage, true);
  });

  // â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  load('all', 0, false);
  fetchCounts();
})();
</script>

{{- end }}
