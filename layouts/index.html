{{ define "main" }}
<div class="profile-container">
  {{- with site.Params.profileMode }}

  <!-- Profile Header -->
  <div class="profile-header">
    {{- if .imageUrl }}
    <div class="profile-image">
      <img src="{{ .imageUrl | absURL }}" alt="{{ .imageTitle | default "Profile" }}"
           width="{{ .imageWidth | default 150 }}"
           height="{{ .imageHeight | default 150 }}" />
    </div>
    {{- end }}

    <h1 class="profile-title">{{ .title }}</h1>
    <p class="profile-subtitle">í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ ì§€ë§ìƒì…ë‹ˆë‹¤.</p>
  </div>

  <!-- í•µì‹¬ ì„±ê³¼ (ì •ì ) -->
  <div class="profile-section">
    <h3>ğŸ“Š í•µì‹¬ ì„±ê³¼</h3>
    <div class="highlight-box">
      ë°°í¬ ì‹œê°„ <span class="metric-badge">67% ë‹¨ì¶•</span> (30ë¶„ â†’ 10ë¶„) Â·
      ê°€ìš©ì„± <span class="metric-badge">99.9%</span> ë‹¬ì„± Â·
      ì¸í”„ë¼ êµ¬ì¶• <span class="metric-badge">94% ìë™í™”</span>
    </div>
  </div>

  <!-- ê¸°ìˆ  ìŠ¤íƒ (ì •ì ) -->
  <div class="profile-section">
    <h3>ğŸ’» ê¸°ìˆ  ìŠ¤íƒ</h3>
    <div class="tech-grid">
      <div>
        <strong>Infrastructure</strong><br>
        AWS Â· Kubernetes Â· Terraform Â· ArgoCD
      </div>
      <div>
        <strong>CI/CD & Monitoring</strong><br>
        Jenkins Â· Prometheus Â· Grafana Â· GitHub Actions
      </div>
      <div>
        <strong>Application</strong><br>
        Spring Boot Â· Redis Â· MySQL Â· nginx
      </div>
    </div>
  </div>

  <!-- ìµœê·¼ í”„ë¡œì íŠ¸ (ë™ì  - ìë™ ì—…ë°ì´íŠ¸) -->
  <div class="profile-section">
    <h3>ğŸ“Œ ìµœê·¼ í”„ë¡œì íŠ¸</h3>
    {{- with site.RegularPages }}
      {{- $projects := where . "Section" "projects" }}
      {{- $projects = where $projects "Type" "!=" "page" }}
      {{- $recentProjects := first 3 $projects }}

      {{- if $recentProjects }}
        {{- range $recentProjects }}
          {{- if ne .File.LogicalName "_index.md" }}
          <div class="project-card">
            <strong><a href="{{ .Permalink }}">{{ .Title }}</a></strong>
            {{- if .Date }}
             ({{ .Date.Format "2006.01" }} ~ í˜„ì¬)<br>
            {{- end }}
            {{- if .Params.summary }}
            {{ .Params.summary }}
            {{- else if .Summary }}
            {{ .Summary | truncate 100 }}
            {{- end }}
          </div>
          {{- end }}
        {{- end }}
      {{- else }}
        <div class="project-card">
          <strong>AWS EKS + Multi-Cloud DR</strong> (2025.11 ~ í˜„ì¬)<br>
          3-Tier ì•„í‚¤í…ì²˜ êµ¬ì¶• Â· 99.9% ê°€ìš©ì„± ë‹¬ì„± Â· Canary ë°°í¬ ìë™í™”
        </div>
      {{- end }}
    {{- else }}
      <!-- Fallback if no pages -->
      <div class="project-card">
        <strong>AWS EKS + Multi-Cloud DR</strong> (2025.11 ~ í˜„ì¬)<br>
        3-Tier ì•„í‚¤í…ì²˜ êµ¬ì¶• Â· 99.9% ê°€ìš©ì„± ë‹¬ì„± Â· Canary ë°°í¬ ìë™í™”
      </div>
    {{- end }}
  </div>

  <!-- ê´€ì‹¬ì‚¬ (ë™ì  - tags ê¸°ë°˜ ìë™ ì¶”ì¶œ) -->
  <div class="profile-section">
    <h3>ğŸ¯ ê´€ì‹¬ì‚¬</h3>
    <div class="interest-box">
      {{- $allTags := slice }}
      {{- $recentPages := first 10 site.RegularPages }}
      {{- range $recentPages }}
        {{- range .Params.tags }}
          {{- $allTags = $allTags | append . }}
        {{- end }}
      {{- end }}

      {{- $tagMap := dict }}
      {{- range $allTags }}
        {{- $count := index $tagMap . | default 0 }}
        {{- $tagMap = merge $tagMap (dict . (add $count 1)) }}
      {{- end }}

      {{- $sortedTags := slice }}
      {{- range $tag, $count := $tagMap }}
        {{- $sortedTags = $sortedTags | append (dict "tag" $tag "count" $count) }}
      {{- end }}

      {{- if gt (len $sortedTags) 0 }}
        {{- $topTags := first 6 (sort $sortedTags "count" "desc") }}
        {{- range $index, $item := $topTags }}
          {{- if eq $item.tag "MSA" }}
            â€¢ <strong>MSA ì „í™˜</strong> - Service Mesh (Istio, Cilium), Event-Driven<br>
          {{- else if or (eq $item.tag "Cost") (eq $item.tag "FinOps") }}
            â€¢ <strong>Cost ìµœì í™”</strong> - Spot Instance, Karpenter, FinOps<br>
          {{- else if or (eq $item.tag "Observability") (eq $item.tag "Monitoring") }}
            â€¢ <strong>Observability</strong> - Distributed Tracing, OpenTelemetry<br>
          {{- else if or (eq $item.tag "Istio") (eq $item.tag "Service Mesh") }}
            â€¢ <strong>Service Mesh</strong> - Istio, Cilium, mTLS, Circuit Breaker<br>
          {{- else if eq $item.tag "Security" }}
            â€¢ <strong>Security</strong> - IRSA, Secrets Manager, Pod Security<br>
          {{- else }}
            â€¢ <strong>{{ $item.tag }}</strong><br>
          {{- end }}
        {{- end }}
      {{- else }}
        <!-- Fallback: ê¸°ë³¸ ê´€ì‹¬ì‚¬ í‘œì‹œ -->
        â€¢ <strong>MSA ì „í™˜</strong> - Service Mesh (Istio, Cilium), Event-Driven<br>
        â€¢ <strong>Cost ìµœì í™”</strong> - Spot Instance, Karpenter, FinOps<br>
        â€¢ <strong>Observability</strong> - Distributed Tracing, OpenTelemetry
      {{- end }}
    </div>
  </div>

  <!-- ë¸”ë¡œê·¸ ì·¨ì§€ (ì •ì ) -->
  <div class="profile-section">
    <h3>âœï¸ ì´ ë¸”ë¡œê·¸ëŠ”</h3>
    <div class="goal-box">
      í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´ë¡œ ì„±ì¥í•˜ë©° ê²ªì€ ê²½í—˜ê³¼ ë°°ì›€ì„ ê¸°ë¡í•˜ê³  ê³µìœ í•©ë‹ˆë‹¤.<br>
      ì‹¤íŒ¨ì™€ í•´ê²° ê³¼ì •, ê·¸ë¦¬ê³  ê·¸ ì•ˆì—ì„œ ì–»ì€ ì¸ì‚¬ì´íŠ¸ë¥¼ ë‚˜ëˆ•ë‹ˆë‹¤.
    </div>
  </div>

  <!-- Buttons -->
  <div class="profile-buttons">
    {{- range .buttons }}
    <a href="{{ .url | absURL }}" class="profile-button">
      {{ .name }}
    </a>
    {{- end }}
  </div>

  {{- end }}{{/* end profileMode */}}
</div>

{{- end }}{{/* end main */}}
