# ==============================================================================
# Spring Boot Application 설정
# ==============================================================================

# 서버 포트 설정
server:
  port: 8080  # Spring Boot가 8080 포트에서 실행

# Spring 설정
spring:
  application:
    name: board  # 애플리케이션 이름

  # 데이터베이스 연결 설정
  datasource:
    # 환경변수로 주입 (Kubernetes ConfigMap/Secret)
    # 기본값: 로컬 MySQL (개발용)
    url: ${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/board?useSSL=false&allowPublicKeyRetrieval=true}
    username: ${SPRING_DATASOURCE_USERNAME:root}
    password: ${SPRING_DATASOURCE_PASSWORD:rootpassword}
    driver-class-name: com.mysql.cj.jdbc.Driver

  # JPA (Java Persistence API) 설정
  jpa:
    # Hibernate 설정
    hibernate:
      ddl-auto: update  # 테이블 자동 생성/수정 (개발: update, 운영: validate)
                        # create: 기존 테이블 삭제 후 재생성
                        # update: 테이블 구조 변경 시 자동 수정
                        # validate: 테이블 구조 검증만
                        # none: 아무것도 안 함
    show-sql: true  # SQL 쿼리 로그 출력 (개발용)
    properties:
      hibernate:
        format_sql: true  # SQL 포맷팅 (가독성)
        dialect: org.hibernate.dialect.MySQLDialect  # MySQL 방언 설정

# Logging 설정
logging:
  level:
    root: INFO  # 기본 로그 레벨
    com.jimin.board: DEBUG  # 우리 패키지는 DEBUG 레벨
    org.hibernate.SQL: DEBUG  # Hibernate SQL 쿼리
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE  # SQL 파라미터 값

# Actuator 설정 (헬스체크)
management:
  endpoints:
    web:
      exposure:
        include: health,info  # /actuator/health, /actuator/info 노출
  endpoint:
    health:
      show-details: always  # 헬스체크 상세 정보 표시

# GitHub OAuth 설정
github:
  oauth:
    client-id: ${GITHUB_OAUTH_CLIENT_ID:Ov23liUDXOW2o62lb8a3}
    client-secret: ${GITHUB_OAUTH_CLIENT_SECRET}  # Kubernetes Secret에서 주입
    redirect-uri: ${GITHUB_OAUTH_REDIRECT_URI:https://blog.jiminhome.shop/auth/callback}
