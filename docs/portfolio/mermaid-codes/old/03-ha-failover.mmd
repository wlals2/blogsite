flowchart TD
    subgraph Cluster["Kubernetes Cluster"]
        Master[ğŸ–¥ï¸ k3s-master<br/>Control Plane]

        subgraph Workers["Worker Nodes"]
            W1[ğŸ’» worker-1<br/>WEB A, WAS A, MySQL]
            W2[ğŸ’» worker-2<br/>WEB B, WAS B<br/>âŒ OOM ì¥ì• ]
            W3[ğŸ’» worker-3<br/>WEB C, WAS C]
        end
    end

    subgraph Failover["Auto-Failover"]
        Detect[ğŸ” ê°ì§€<br/>NotReady<br/>5ì´ˆ]
        Longhorn[ğŸ’¾ Longhorn<br/>Volume Detach<br/>2ë¶„]
        Schedule[ğŸ“‹ Scheduler<br/>ìƒˆ ë…¸ë“œ ì„ íƒ]
        Attach[ğŸ”— Volume Attach<br/>Replica ë³µêµ¬<br/>1ë¶„]
        Start[â–¶ï¸ Pod ì‹œì‘<br/>MySQL ì´ˆê¸°í™”<br/>30ì´ˆ]
        Ready[âœ… Ready<br/>ì„œë¹„ìŠ¤ ë³µêµ¬<br/>ì´ 5ë¶„]
    end

    W2 -.->|ì¥ì• | Detect
    Detect -->|timeout| Longhorn
    Longhorn -->|ë¶„ë¦¬| Schedule
    Schedule -->|ì„ íƒ| Attach
    Attach -->|Mount| Start
    Start -->|Check| Ready

    style W2 fill:#ff6b6b
    style Detect fill:#ffd700
    style Longhorn fill:#87ceeb
    style Schedule fill:#90ee90
    style Attach fill:#dda0dd
    style Start fill:#ffb6c1
    style Ready fill:#98fb98
