flowchart TD
    User[ğŸ‘¤ ì‚¬ìš©ì<br/>https://blog.jiminhome.shop/]

    CDN[â˜ï¸ Cloudflare CDN<br/>SSL/TLS ì¢…ë£Œ<br/>DDoS ë°©ì–´]

    MetalLB[âš–ï¸ MetalLB<br/>192.168.1.200<br/>L2 LoadBalancer]

    IGW[ğŸšª Istio Gateway<br/>L7 Routing<br/>í¬íŠ¸: 80]

    VS[ğŸ“‹ VirtualService<br/>URI: / â†’ web<br/>URI: /api â†’ web]

    WEB[ğŸŒ WEB Pod<br/>nginx + Hugo<br/>ì •ì  íŒŒì¼]

    WAS[â˜• WAS Pod<br/>Spring Boot<br/>API ì²˜ë¦¬]

    MySQL[ğŸ’¾ MySQL<br/>Longhorn PVC<br/>Replica 3]

    User -->|1. HTTPS| CDN
    CDN -->|2. HTTP í‰ë¬¸| MetalLB
    MetalLB -->|3. Port 80| IGW
    IGW -->|4. Host ë§¤ì¹­| VS
    VS -->|5. URI /| WEB
    VS -.->|5. URI /api| WEB
    WEB -.->|6. nginx proxy<br/>/api â†’ was:8080| WAS
    WAS -.->|7. JDBC| MySQL

    style User fill:#e1f5ff
    style CDN fill:#ffd700
    style MetalLB fill:#90ee90
    style IGW fill:#ffb6c1
    style VS fill:#dda0dd
    style WEB fill:#87ceeb
    style WAS fill:#ffa07a
    style MySQL fill:#d3d3d3
